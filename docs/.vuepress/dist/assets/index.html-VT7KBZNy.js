import{_ as e}from"./docker-run-C2jl39bg.js";import{_ as t,o as s,c as n,e as a}from"./app-CpEU-mIR.js";const i={},o=a(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>忘记密码</p><ol><li>进入 Mongodb 数据库修改 user 表中的 password 为 b0ce71fcbed8a6ca579d52800145119cc7d999dc8651b62dfc1ced9a984e6e64 (明文为ScopeSentry)</li><li>执行下边命令初始化密码为ScopeSentry</li></ol><p>docker exec -it scopesentry-mongodb mongosh -u admin -p password --eval &#39;db = db.getSiblingDB(&quot;ScopeSentry&quot;); db.user.updateOne({ &quot;username&quot;: &quot;ScopeSentry&quot; }, { $set: { &quot;password&quot;: &quot;b0ce71fcbed8a6ca579d52800145119cc7d999dc8651b62dfc1ced9a984e6e64&quot; } })&#39;</p></div><p>系统分为四个服务：</p><ul><li>web/server端-用于资产管理、任务管理等</li><li>scan端-用于扫描，可以在多台机器部署</li><li>Mongodb-数据库，只要web和scan能连接上这个数据库就行。</li><li>redis-redis，只要web和scan能连接上这个redis就行。</li></ul><h2 id="单机部署-教程" tabindex="-1"><a class="header-anchor" href="#单机部署-教程"><span>单机部署(教程)</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>单机部署的compose配置文件中已经包含了数据库镜像，只需要修改mongodb、redis的账号密码即可。scan的docker由于部分机器网络原因（暂时不清楚哪里的问题），临时解决方案是将network_mode设置为host，所以scan的docker可以使用127进行访问数据库，无需更改。</p></div><p>数据库密码不要使用@等特殊符号。</p><p>数据库、redis会挂载目录到项目的根目录data文件夹中，如果设置过一次密码，并且data文件夹已经生成了，那密码不会变化，如果之后重新搭建可以注意一下这个问题防止又修改密码没有生效。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>git clone https://github.com/Autumn-27/ScopeSentry.git</span></span>
<span class="line"><span>cd ScopeSentry</span></span>
<span class="line"><span># 修改.env文件中的mongodb、redis账号密码。</span></span>
<span class="line"><span>docker-compose -f single-host-deployment.yml up -d</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行之后一共四个容器 <ul><li>scope-sentry (服务端-web界面)</li><li>scopesentry-scan (扫描端)</li><li>Mongodb (数据库)</li><li>Redis</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>查看初始用户密码以及插件二次验证密码</span></span>
<span class="line"><span>docker logs scope-sentry</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后访问IP:8082</p><p>单机部署就这么多，修改账号密码，然后一个命令启动docker <img src="`+e+'" alt="alt text"></p><p>单机部署之后，如果想在其他机器运行扫描节点，只需要单独运行scan，将数据库地址填写为单机部署那台机器的ip。</p><h2 id="数据迁移" tabindex="-1"><a class="header-anchor" href="#数据迁移"><span>数据迁移</span></a></h2><p>在数据库的docker配置文件中，有挂载目录设置，默认为当前运行目录的data目录，迁移数据时将文件迁移即可。</p>',15),c=[o];function d(r,p){return s(),n("div",null,c)}const u=t(i,[["render",d],["__file","index.html.vue"]]),h=JSON.parse(`{"path":"/guide/y0qsb5ks/","title":"单机部署","lang":"zh-CN","frontmatter":{"title":"单机部署","author":"Autumn","createTime":"2024/11/17 20:01:03","permalink":"/guide/y0qsb5ks/","icon":"mdi:server-outline","description":"提示 忘记密码 进入 Mongodb 数据库修改 user 表中的 password 为 b0ce71fcbed8a6ca579d52800145119cc7d999dc8651b62dfc1ced9a984e6e64 (明文为ScopeSentry) 执行下边命令初始化密码为ScopeSentry docker exec -it scopesentr...","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'dark';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"],["link",{"rel":"alternate","hreflang":"en-us","href":"https://www.scope-sentry.top/en/guide/y0qsb5ks/"}],["meta",{"property":"og:url","content":"https://www.scope-sentry.top/guide/y0qsb5ks/"}],["meta",{"property":"og:site_name","content":"ScopeSentry"}],["meta",{"property":"og:title","content":"单机部署"}],["meta",{"property":"og:description","content":"提示 忘记密码 进入 Mongodb 数据库修改 user 表中的 password 为 b0ce71fcbed8a6ca579d52800145119cc7d999dc8651b62dfc1ced9a984e6e64 (明文为ScopeSentry) 执行下边命令初始化密码为ScopeSentry docker exec -it scopesentr..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.scope-sentry.top/images/docker-run.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-02-22T13:46:37.000Z"}],["meta",{"property":"article:author","content":"Autumn"}],["meta",{"property":"article:modified_time","content":"2025-02-22T13:46:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"单机部署\\",\\"image\\":[\\"https://www.scope-sentry.top/images/docker-run.png\\"],\\"dateModified\\":\\"2025-02-22T13:46:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Autumn\\"}]}"]]},"headers":[{"level":2,"title":"单机部署(教程)","slug":"单机部署-教程","link":"#单机部署-教程","children":[]},{"level":2,"title":"数据迁移","slug":"数据迁移","link":"#数据迁移","children":[]}],"readingTime":{"minutes":1.82,"words":545},"git":{"updatedTime":1740231997000,"contributors":[{"name":"Autumn.home","email":"autumn@home.com","commits":5}]},"autoDesc":true,"filePathRelative":"notes/guide/安装/单机部署.md"}`);export{u as comp,h as data};
